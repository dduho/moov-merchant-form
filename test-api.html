<!DOCTYPE html>
<html>
<head>
    <title>Test API Merchant Form</title>
</head>
<body>
    <h1>Test API</h1>
    <button onclick="testSubmit()">Test Submit</button>
    <div id="result"></div>

    <script>
        async function testSubmit() {
            const formData = new FormData();
            
            // Informations personnelles
            formData.append('first_name', 'David');
            formData.append('last_name', 'DUHO');
            formData.append('birth_date', '1995-10-12');
            formData.append('birth_place', 'Lomé');
            formData.append('gender', 'M');
            formData.append('nationality', 'TOGOLAISE');
            formData.append('phone', '99669582');
            formData.append('merchant_phone', '99665442');
            formData.append('address', '1785 Boulevard du Carmel');
            
            // Identité
            formData.append('id_type', 'cni');
            formData.append('id_number', '26262161161');
            formData.append('id_expiry_date', '2026-10-12');
            formData.append('has_anid_card', '0');
            formData.append('is_foreigner', '0');
            
            // Informations commerciales
            formData.append('business_name', 'Nom 1');
            formData.append('business_type', 'pharmacie');
            formData.append('business_address', '12 Rue de la chance');
            formData.append('usage_type', 'MERC');
            formData.append('has_cfe', '0');
            formData.append('has_nif', '1');
            
            // Signature et acceptation
            formData.append('signature', 'data:image/png;base64,test');
            formData.append('accept_terms', '1');
            
            try {
                const response = await fetch('http://localhost:8000/api/merchant-applications', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                const result = await response.json();
                document.getElementById('result').innerHTML = 
                    `<h2>Status: ${response.status}</h2><pre>${JSON.stringify(result, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    `<h2>Error</h2><pre>${error.message}</pre>`;
            }
        }
    </script>
</body>
</html>